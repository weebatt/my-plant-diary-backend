Давай будем сюда писать правила, которые необходимо соблюдать при разработке.

И ты и я будем им строго следовать.

1) Думаю первым правилом, будет написание unit tests под новую логику. Важно соблюдать единый формат написания unit tests,
чтобы в будущем было проще и легче их читать.

2) После добавления новой логики нужно обязательно запускать build проекта.

3) Конфигурация через переменные окружения: локально используем файл `.env` (не коммитим в репозиторий). Все сервисы Spring автоматически загружают `.env` при старте (spring-dotenv). Секреты — только через переменные окружения/секрет‑сторы.

4) Каждый PR обновляет документацию, если меняются контракты, топология или функциональность (минимум: `docs/IMPLEMENTATION_PLAN.md` и релевантные файлы).

5) Интеграции с внешними системами (БД, брокер) покрываем интеграционными тестами (Testcontainers) там, где это критично. Unit‑тесты — обязательны для новой логики.

6) Стиль коммитов — Conventional Commits. Ветки называем в стиле `feat/...`, `fix/...`, `chore/...` с осмысленным суффиксом (пример: `feat/m0-dotenv-and-amqp-topology`).

7) Сообщения (RabbitMQ) — только JSON `EventEnvelope<T>` по `docs/messaging.md`. Консьюмеры — manual ack, идемпотентность по `envelope.id`, DLQ настроен. Контракты версионируем.

8) Границы сервисов: каждый сервис владеет своей БД/схемой; кросс‑сервисных JOIN нет. Синхронные вызовы — HTTP через Gateway, асинхронные — через брокер.

9) Линтинг/качество: перед пушем запускаем `./gradlew detekt build`. CI не должен краснеть.
